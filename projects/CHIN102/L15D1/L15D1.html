<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Vocabulary Reviewer</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }
        .selector-container {
            margin-bottom: 20px;
        }
        select {
            padding: 8px 15px;
            font-size: 1rem;
            border-radius: 8px;
            border: 1px solid #ccc;
            outline: none;
        }
        .card-container {
            perspective: 1000px;
            width: 350px;
            height: 250px;
            cursor: pointer;
        }
        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 15px;
        }
        .card.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            background: white;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }
        .card-back {
            transform: rotateY(180deg);
            background-color: #fffdf0;
        }
        .character {
            font-size: 4rem;
            color: #2c3e50;
        }
        .pinyin {
            font-size: 1.5rem;
            color: #e67e22;
            margin-bottom: 10px;
        }
        .meaning {
            font-size: 1.2rem;
            color: #7f8c8d;
        }
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        button {
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            background-color: #3498db;
            color: white;
            transition: 0.2s;
        }
        button:hover { background-color: #2980b9; }
        .speak-btn { background-color: #2ecc71; }
        .speak-btn:hover { background-color: #27ae60; }
        .shuffle-btn { background-color: #9b59b6; }
        .counter {
            margin-top: 15px;
            color: #95a5a6;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="selector-container">
        <label for="section-select">Choose Section: </label>
        <select id="section-select" onchange="changeSection()">
            <option value="all">All Words (1-37)</option>
            <option value="1">Section 1 (1-21)</option>
            <option value="2">Section 2 (22-37)</option>
        </select>
    </div>

    <div class="card-container" onclick="flipCard()">
        <div class="card" id="card">
            <div class="card-face card-front">
                <div class="character" id="char-display">ç—…äºº</div>
            </div>
            <div class="card-face card-back">
                <div class="pinyin" id="pinyin-display">bÃ¬ngrÃ©n</div>
                <div class="meaning" id="meaning-display">patient</div>
            </div>
        </div>
    </div>

    <div class="counter" id="counter">Card 1 / 37</div>

    <div class="controls">
        <button onclick="prevCard(event)">Prev</button>
        <button onclick="flipCard(event)">Flip</button>
        <button class="speak-btn" onclick="speakText(event)">ðŸ”Š Speak</button>
        <button onclick="nextCard(event)">Next</button>
        <button class="shuffle-btn" onclick="shuffleCards()">Shuffle</button>
    </div>

    <script>
        const originalVocab = [
            // Section 1
            { char: "ç—…äºº", pinyin: "bÃ¬ngrÃ©n", meaning: "patient", section: "1" },
            { char: "é†«é™¢", pinyin: "yÄ«yuÃ n", meaning: "hospital", section: "1" },
            { char: "çœ‹ç—…", pinyin: "kÃ n bÃ¬ng", meaning: "to see a doctor", section: "1" },
            { char: "è‚šå­", pinyin: "dÃ¹zi", meaning: "belly; abdomen; stomach", section: "1" },
            { char: "ç–¼æ­»", pinyin: "tÃ©ng sÇ", meaning: "really painful", section: "1" },
            { char: "å¤œè£¡", pinyin: "yÃ¨ li", meaning: "at night", section: "1" },
            { char: "å¥½å¹¾", pinyin: "hÇŽo jÇ", meaning: "quite a few", section: "1" },
            { char: "å»æ‰€", pinyin: "cÃ¨suÇ’", meaning: "restroom; toilet", section: "1" },
            { char: "æŠŠ", pinyin: "bÇŽ", meaning: "prep. indicating disposition or arrangement", section: "1" },
            { char: "å†°ç®±", pinyin: "bÄ«ngxiÄng", meaning: "refrigerator", section: "1" },
            { char: "ç™¼ç‡’", pinyin: "fÄ shÄo", meaning: "to have a fever", section: "1" },
            { char: "èººä¸‹", pinyin: "tÇŽng xia", meaning: "to lie down", section: "1" },
            { char: "æª¢æŸ¥", pinyin: "jiÇŽnchÃ¡", meaning: "to examine", section: "1" },
            { char: "åƒå£ž", pinyin: "chÄ« huÃ i", meaning: "to get sick because of bad food", section: "1" },
            { char: "æ‰“é‡", pinyin: "dÇŽ zhÄ“n", meaning: "to get an injection", section: "1" },
            { char: "è—¥", pinyin: "yÃ o", meaning: "medicine", section: "1" },
            { char: "ç‰‡", pinyin: "piÃ n", meaning: "measure word for tablets, slices, etc.", section: "1" },
            { char: "é", pinyin: "biÃ n", meaning: "measure word for complete courses of an action", section: "1" },
            { char: "æœ€å¥½", pinyin: "zuÃ¬hÇŽo", meaning: "had better", section: "1" },
            { char: "å°æ™‚", pinyin: "xiÇŽoshÃ­", meaning: "hour", section: "1" },
            { char: "è¾¦æ³•", pinyin: "bÃ nfÇŽ", meaning: "method; way (of doing something)", section: "1" },
            // Section 2
            { char: "ç”Ÿç—…", pinyin: "shÄ“ng bÃ¬ng", meaning: "to get sick", section: "2" },
            { char: "æ„Ÿå†’", pinyin: "gÇŽnmÃ o", meaning: "to have a cold", section: "2" },
            { char: "èº«é«”", pinyin: "shÄ“ntÇ", meaning: "body; health", section: "2" },
            { char: "ç™¢", pinyin: "yÇŽng", meaning: "itchy", section: "2" },
            { char: "éŽæ•", pinyin: "guÃ²mÇn", meaning: "to be allergic to", section: "2" },
            { char: "è—¥åº—", pinyin: "yÃ odiÃ n", meaning: "pharmacy", section: "2" },
            { char: "å¥åº·", pinyin: "jiÃ nkÄng", meaning: "healthy; health", section: "2" },
            { char: "ä¿éšª", pinyin: "bÇŽoxiÇŽn", meaning: "insurance; secure", section: "2" },
            { char: "è¶•å¿«", pinyin: "gÇŽnkuÃ i", meaning: "right away; quickly; in a hurry", section: "2" },
            { char: "è¦ä¸ç„¶", pinyin: "yÃ obÃ¹rÃ¡n", meaning: "otherwise", section: "2" },
            { char: "è¶Šä¾†è¶Š", pinyin: "yuÃ¨ lÃ¡i yuÃ¨", meaning: "more and more", section: "2" },
            { char: "ä¸Šæ¬¡", pinyin: "shÃ ng cÃ¬", meaning: "last time", section: "2" },
            { char: "ä¼‘æ¯", pinyin: "xiÅ«xi", meaning: "to take a break; to rest", section: "2" },
            { char: "æ‡¶", pinyin: "lÇŽn", meaning: "lazy", section: "2" },
            { char: "å†èªª", pinyin: "zÃ ishuÅ", meaning: "moreover", section: "2" },
            { char: "äº‚", pinyin: "luÃ n", meaning: "randomly; arbitrarily; messily", section: "2" }
        ];

        let vocab = [...originalVocab];
        let currentIndex = 0;
        const card = document.getElementById('card');
        const charDisplay = document.getElementById('char-display');
        const pinyinDisplay = document.getElementById('pinyin-display');
        const meaningDisplay = document.getElementById('meaning-display');
        const counterDisplay = document.getElementById('counter');
        const sectionSelect = document.getElementById('section-select');

        function changeSection() {
            const selectedValue = sectionSelect.value;
            if (selectedValue === "all") {
                vocab = [...originalVocab];
            } else {
                vocab = originalVocab.filter(item => item.section === selectedValue);
            }
            currentIndex = 0;
            updateCard();
        }

        function updateCard() {
            card.classList.remove('is-flipped');
            setTimeout(() => {
                if (vocab.length > 0) {
                    charDisplay.innerText = vocab[currentIndex].char;
                    pinyinDisplay.innerText = vocab[currentIndex].pinyin;
                    meaningDisplay.innerText = vocab[currentIndex].meaning;
                    counterDisplay.innerText = `Card ${currentIndex + 1} / ${vocab.length}`;
                }
            }, 150);
        }

        function flipCard(event) {
            if(event) event.stopPropagation();
            card.classList.toggle('is-flipped');
        }

        function nextCard(event) {
            if(event) event.stopPropagation();
            currentIndex = (currentIndex + 1) % vocab.length;
            updateCard();
        }

        function prevCard(event) {
            if(event) event.stopPropagation();
            currentIndex = (currentIndex - 1 + vocab.length) % vocab.length;
            updateCard();
        }

        function shuffleCards() {
            vocab.sort(() => Math.random() - 0.5);
            currentIndex = 0;
            updateCard();
        }

        function speakText(event) {
            if(event) event.stopPropagation();
            const utterance = new SpeechSynthesisUtterance(vocab[currentIndex].char);
            utterance.lang = 'zh-TW'; 
            utterance.rate = 0.8;
            window.speechSynthesis.speak(utterance);
        }

        document.addEventListener('keydown', (e) => {
            if (e.code === "Space") flipCard();
            if (e.code === "ArrowRight") nextCard();
            if (e.code === "ArrowLeft") prevCard();
            if (e.code === "KeyV") speakText();
        });
        
        // Initialize
        updateCard();
    </script>
</body>
</html>