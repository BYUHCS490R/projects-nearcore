<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinese Vocabulary Reviewer with Audio</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f2f5;
        }
        .card-container {
            perspective: 1000px;
            width: 350px;
            height: 250px;
            cursor: pointer;
        }
        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transition: transform 0.6s;
            transform-style: preserve-3d;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-radius: 15px;
        }
        .card.is-flipped {
            transform: rotateY(180deg);
        }
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            background: white;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
        }
        .card-back {
            transform: rotateY(180deg);
            background-color: #fffdf0;
        }
        .character {
            font-size: 4rem;
            color: #2c3e50;
        }
        .pinyin {
            font-size: 1.5rem;
            color: #e67e22;
            margin-bottom: 10px;
        }
        .meaning {
            font-size: 1.2rem;
            color: #7f8c8d;
        }
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        button {
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            border-radius: 8px;
            background-color: #3498db;
            color: white;
            transition: 0.2s;
        }
        button:hover { background-color: #2980b9; }
        .speak-btn { background-color: #2ecc71; }
        .speak-btn:hover { background-color: #27ae60; }
        .shuffle-btn { background-color: #9b59b6; }
        .counter {
            margin-top: 15px;
            color: #95a5a6;
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="card-container" onclick="flipCard()">
        <div class="card" id="card">
            <div class="card-face card-front">
                <div class="character" id="char-display">ç—…äºº</div>
            </div>
            <div class="card-face card-back">
                <div class="pinyin" id="pinyin-display">bÃ¬ngrÃ©n</div>
                <div class="meaning" id="meaning-display">patient</div>
            </div>
        </div>
    </div>

    <div class="counter" id="counter">Card 1 / 21</div>

    <div class="controls">
        <button onclick="prevCard()">Prev</button>
        <button onclick="flipCard()">Flip</button>
        <button class="speak-btn" onclick="speakText(event)">ðŸ”Š Speak</button>
        <button onclick="nextCard()">Next</button>
        <button class="shuffle-btn" onclick="shuffleCards()">Shuffle</button>
    </div>

    <script>
        const originalVocab = [
            { char: "ç—…äºº", pinyin: "bÃ¬ngrÃ©n", meaning: "patient" },
            { char: "é†«é™¢", pinyin: "yÄ«yuÃ n", meaning: "hospital" },
            { char: "çœ‹ç—…", pinyin: "kÃ n bÃ¬ng", meaning: "to see a doctor" },
            { char: "è‚šå­", pinyin: "dÃ¹zi", meaning: "belly; abdomen; stomach" },
            { char: "ç–¼æ­»", pinyin: "tÃ©ng sÇ", meaning: "really painful" },
            { char: "å¤œè£¡", pinyin: "yÃ¨ li", meaning: "at night" },
            { char: "å¥½å¹¾", pinyin: "hÇŽo jÇ", meaning: "quite a few" },
            { char: "å»æ‰€", pinyin: "cÃ¨suÇ’", meaning: "restroom; toilet" },
            { char: "æŠŠ", pinyin: "bÇŽ", meaning: "prep. indicating disposition or arrangement" },
            { char: "å†°ç®±", pinyin: "bÄ«ngxiÄng", meaning: "refrigerator" },
            { char: "ç™¼ç‡’", pinyin: "fÄ shÄo", meaning: "to have a fever" },
            { char: "èººä¸‹", pinyin: "tÇŽng xia", meaning: "to lie down" },
            { char: "æª¢æŸ¥", pinyin: "jiÇŽnchÃ¡", meaning: "to examine" },
            { char: "åƒå£ž", pinyin: "chÄ« huÃ i", meaning: "to get sick because of bad food" },
            { char: "æ‰“é‡", pinyin: "dÇŽ zhÄ“n", meaning: "to get an injection" },
            { char: "è—¥", pinyin: "yÃ o", meaning: "medicine" },
            { char: "ç‰‡", pinyin: "piÃ n", meaning: "measure word for tablets, slices, etc." },
            { char: "é", pinyin: "biÃ n", meaning: "measure word for complete courses of an action" },
            { char: "æœ€å¥½", pinyin: "zuÃ¬hÇŽo", meaning: "had better" },
            { char: "å°æ™‚", pinyin: "xiÇŽoshÃ­", meaning: "hour" },
            { char: "è¾¦æ³•", pinyin: "bÃ nfÇŽ", meaning: "method; way (of doing something)" }
        ];

        let vocab = [...originalVocab];
        let currentIndex = 0;
        const card = document.getElementById('card');
        const charDisplay = document.getElementById('char-display');
        const pinyinDisplay = document.getElementById('pinyin-display');
        const meaningDisplay = document.getElementById('meaning-display');
        const counterDisplay = document.getElementById('counter');

        function updateCard() {
            card.classList.remove('is-flipped');
            setTimeout(() => {
                charDisplay.innerText = vocab[currentIndex].char;
                pinyinDisplay.innerText = vocab[currentIndex].pinyin;
                meaningDisplay.innerText = vocab[currentIndex].meaning;
                counterDisplay.innerText = `Card ${currentIndex + 1} / ${vocab.length}`;
            }, 150);
        }

        function flipCard() {
            card.classList.toggle('is-flipped');
        }

        function nextCard() {
            currentIndex = (currentIndex + 1) % vocab.length;
            updateCard();
        }

        function prevCard() {
            currentIndex = (currentIndex - 1 + vocab.length) % vocab.length;
            updateCard();
        }

        function shuffleCards() {
            vocab.sort(() => Math.random() - 0.5);
            currentIndex = 0;
            updateCard();
        }

        function speakText(event) {
            if(event) event.stopPropagation(); // Prevents flipping when clicking speak
            const utterance = new SpeechSynthesisUtterance(vocab[currentIndex].char);
            utterance.lang = 'zh-TW'; // Sets to Traditional Chinese/Mandarin
            utterance.rate = 0.8;    // Slightly slower for better clarity
            window.speechSynthesis.speak(utterance);
        }

        document.addEventListener('keydown', (e) => {
            if (e.code === "Space") flipCard();
            if (e.code === "ArrowRight") nextCard();
            if (e.code === "ArrowLeft") prevCard();
            if (e.code === "KeyV") speakText();
        });
    </script>
</body>
</html>